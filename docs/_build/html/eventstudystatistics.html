<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>eventstudystatistics package &mdash; EventStudyStatistics  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> EventStudyStatistics
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EventStudyStatistics</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">eventstudystatistics package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/eventstudystatistics.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="eventstudystatistics-package">
<h1>eventstudystatistics package<a class="headerlink" href="#eventstudystatistics-package" title="Permalink to this heading"></a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</div>
<div class="section" id="module-eventstudystatistics.statistical_tests">
<span id="eventstudystatistics-statistical-tests-module"></span><h2>eventstudystatistics.statistical_tests module<a class="headerlink" href="#module-eventstudystatistics.statistical_tests" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.TestResults">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">TestResults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statistic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pvalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventstudystatistics.statistical_tests.TestResults" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.TestResults.pvalue">
<span class="sig-name descname"><span class="pre">pvalue</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#eventstudystatistics.statistical_tests.TestResults.pvalue" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.TestResults.statistic">
<span class="sig-name descname"><span class="pre">statistic</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#eventstudystatistics.statistical_tests.TestResults.statistic" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.adjBMP">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">adjBMP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">AR</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R_market_estimation_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R_market_event_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CAR_period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#eventstudystatistics.statistical_tests.TestResults" title="eventstudystatistics.statistical_tests.TestResults"><span class="pre">TestResults</span></a></span></span><a class="headerlink" href="#eventstudystatistics.statistical_tests.adjBMP" title="Permalink to this definition"></a></dt>
<dd><p>adjusted BMP / standardized cross-sectional test as in the paper
“Event study methodology under conditions of event induced variance” by  Böhmer et al. (1991)</p>
<p>null hypothesis: E(CAAR) = 0</p>
<p>We have n events, L1 days in the estimation window, L2 days in the event window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>AR</strong> – abnormal returns, a n x L2 matrix</p></li>
<li><p><strong>eps</strong> – residuals from the market model, a n x L1 matrix</p></li>
<li><p><strong>R_market_estimation_window</strong> – returns of the market in the estimation window for each event, a n x L1 matrix</p></li>
<li><p><strong>R_market_event_window</strong> – returns of the market in the event window for each even, a n x L2 matrix</p></li>
<li><p><strong>event_day</strong> – day of the event, if day nr 21 is the event day, then event_day = 20</p></li>
<li><p><strong>CAR_period</strong> – period of the event window we are observing. Careful for 41 days [0, 40] would represent the full</p></li>
</ul>
</dd>
</dl>
<p>event window.
:param adjustment: whether the BMP (False) or the adjusted BMP (True) should be calculated.
In case of too many events, the cross correlation is estimated because of the runtime complexity of the calculation.
:return:</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.adjBMP_daily">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">adjBMP_daily</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">AR</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R_market_estimation_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R_market_event_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#eventstudystatistics.statistical_tests.TestResults" title="eventstudystatistics.statistical_tests.TestResults"><span class="pre">TestResults</span></a></span></span><a class="headerlink" href="#eventstudystatistics.statistical_tests.adjBMP_daily" title="Permalink to this definition"></a></dt>
<dd><p>adjusted BMP / standardized cross-sectional test</p>
<p>null hypothesis: E(AAR) = 0</p>
<p>We have n events, L1 days in the estimation window, L2 days in the event window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>AR</strong> – abnormal returns, a n x L2 matrix</p></li>
<li><p><strong>eps</strong> – residuals from the market model, a n x L1 matrix</p></li>
<li><p><strong>R_market_estimation_window</strong> – returns of the market in the estimation window for each event, a n x L1 matrix</p></li>
<li><p><strong>R_market_event_window</strong> – returns of the market in the event window for each event, a n x L2 matrix</p></li>
<li><p><strong>t</strong> – day of the event, if day nr 21 is the event day, then event_day = 20</p></li>
<li><p><strong>adjustment</strong> – whether the BMP (False) or the adjusted BMP (True) should be calculated.</p></li>
</ul>
</dd>
</dl>
<p>In case of too many events, the cross correlation is estimated because of the runtime complexity of the calculation.
:return: test statistic and p-value</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.adjust">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">adjust</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">z_BMP</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventstudystatistics.statistical_tests.adjust" title="Permalink to this definition"></a></dt>
<dd><p>Make adjustment to BMP test statistic</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.calc_sigma_sq_AR_i">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">calc_sigma_sq_AR_i</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eps_i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">M1_i</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventstudystatistics.statistical_tests.calc_sigma_sq_AR_i" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eps_i</strong> – residuals of event i</p></li>
<li><p><strong>M1_i</strong> – non-missing values in eps_i</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sigma_sq_AR_i</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.calculate_GSAR">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">calculate_GSAR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">SCAR</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SAR</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventstudystatistics.statistical_tests.calculate_GSAR" title="Permalink to this definition"></a></dt>
<dd><p>repeat SCAR tau days and concatenate arrays</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.calculate_U">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">calculate_U</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">GSAR_T_script</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">M_T_script</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventstudystatistics.statistical_tests.calculate_U" title="Permalink to this definition"></a></dt>
<dd><p>calculate ranks, divide by the number of valid days and then subtract 0.5. Should have mean 0.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.calculate_average_cross_correlation">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">calculate_average_cross_correlation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5000000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventstudystatistics.statistical_tests.calculate_average_cross_correlation" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eps</strong> – estimation window residuals</p></li>
<li><p><strong>threshold</strong> – Where to start subsampling, subsampling will pick threshold/2 datapoints at random without replacement and without the diagonal line</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>average cross correlation</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.calculate_grank_Z">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">calculate_grank_Z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">U</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T_script</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eventstudystatistics.statistical_tests.calculate_grank_Z" title="Permalink to this definition"></a></dt>
<dd><p>calculate grank test statistic</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eventstudystatistics.statistical_tests.grank">
<span class="sig-prename descclassname"><span class="pre">eventstudystatistics.statistical_tests.</span></span><span class="sig-name descname"><span class="pre">grank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">AR</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R_market_estimation_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R_market_event_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CAR_period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjust_cumulating_ind_prediction_errors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#eventstudystatistics.statistical_tests.TestResults" title="eventstudystatistics.statistical_tests.TestResults"><span class="pre">TestResults</span></a></span></span><a class="headerlink" href="#eventstudystatistics.statistical_tests.grank" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the GRANK / generalized rank t test, as found in the paper “Nonparametric rank tests for event studied”
by Kolari and Pynnonen (2011). Optional adjustment as found in Mikkelson and Partch (1988) “Withdrawn Security Offerings”</p>
<p>null hypothesis: E(CAAR) = 0</p>
<p>We have n events, L1 days in the estimation window, L2 days in the event window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>AR</strong> – abnormal returns, a n x L2 matrix</p></li>
<li><p><strong>eps</strong> – residuals from the market model, a n x L1 matrix</p></li>
<li><p><strong>R_market_estimation_window</strong> – returns of the market in the estimation window for each event, a n x L1 matrix</p></li>
<li><p><strong>R_market_event_window</strong> – returns of the market in the event window for each event, a n x L2 matrix</p></li>
<li><p><strong>CAR_period</strong> – period of the event window we are observing. Careful for 41 days [0, 40] would represent the full</p></li>
</ul>
</dd>
</dl>
<p>event window
:param adjust_cumulating_ind_prediction_errors: Whether to use adjustment factor suggested by Mikkelson and
Partch (1988), which makes no difference in this case, because we also calculate the SCAR_star, which is
standardised by the standard deviation of the SCAR, therefore the scalar adjustment factor does not change the result.
:return: test statistic and p-value</p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Thomas Niedermayer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>